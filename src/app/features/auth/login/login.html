@if (loginForm != undefined) {
@let form = loginForm.controls;
<form [formGroup]="loginForm" (ngSubmit)="loginFormHandler()" class="form" @slideAnimation>
    <h1 class="form-title">Login Form</h1>
    <!-- Username Input Field -->
    <mat-form-field>
        <mat-label>Username</mat-label>
        <input matInput formControlName="username" appFocusInput>
        <!--?Clear input button  -->
        @if (form.username.value) {
        <button matSuffix matIconButton (click)="resetInput($event, 'username')" tabindex="-1" type="button"
            aria-label="Clear">
            <mat-icon>close</mat-icon>
        </button>
        }
        <!--?Clear input button  -->
        <!--!Error messages  -->
        @if(form.username.hasError('required') && form.username.touched){
        <mat-error>Username is required!</mat-error>
        }
        @else if (form.username.hasError('minlength') && form.username.touched) {
        <mat-error>Username must be at least 3 characters long!</mat-error>
        }
        <!--!Error messages  -->

    </mat-form-field>
    <!-- Username Input Field -->


    <!-- Password Input Field -->
    <mat-form-field>
        <mat-label>Password</mat-label>
        <input matInput type="password" formControlName="password">
        <!--?Clear input button  -->
        @if (form.password.value) {
        <button matSuffix matIconButton (click)="resetInput($event, 'password')" tabindex="-1" type="button"
            aria-label="Clear">
            <mat-icon>close</mat-icon>
        </button>
        }
        <!--?Clear input button  -->
        <!--!Error messages  -->
        @if(form.password.hasError('required') && form.password.touched){
        <mat-error>Password is required!</mat-error>
        }
        @else if (form.password.hasError('minlength')) {
        <mat-error>Password must be at least 3 characters long!</mat-error>
        }
        <!--!Error messages  -->
    </mat-form-field>
    <!-- Password Input Field -->

    @if (serverErrorMessageSignal()) {
    <mat-error class="server-error">{{serverErrorMessageSignal()}}</mat-error>

    }<!-- Submit Button -->
    @if (isLoading()) {
    <mat-spinner class="spinner" />
    } @else {
    <button class="form-btn" matButton="filled" type="submit" [disabled]="loginForm.invalid">Login</button>
    }
    <!-- Submit Button -->
    <p class="form-hint">
        New customer?
        <a routerLink="/users/register" class="link">Start here</a>
    </p>
</form>

}